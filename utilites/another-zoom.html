<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>SVG Zoom + Drag</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #111;
      color: #eee;
      padding: 16px;
    }

    h1 {
      margin-bottom: 8px;
      font-size: 20px;
    }

    p {
      margin-top: 0;
      margin-bottom: 12px;
      font-size: 14px;
      color: #ccc;
    }

    /* Scrollable outer container */
    .svg-container {
      border: 1px solid #444;
      border-radius: 6px;
      background: #222;
      width: 100%;
      max-width: 100%;
      height: 100vh;      /* viewport height */
      overflow: hidden;     /* important: enables scroll */
      position: relative;
      cursor: grab;
    }

    .svg-container:active {
      cursor: grabbing;
    }

    /* SVG being transformed */
    #ikr_svg {
      display: block;
      transform-origin: 0 0; /* zoom from top-left */
      transform: scale(1);
      user-select: none;
    }
  </style>
</head>
<body>
  <h1>Zoom & Drag SVG</h1>
  <p>Use the mouse wheel to zoom, click + drag to pan (desktop).</p>

  <div class="svg-container">
    <!-- YOUR SVG HERE -->
    <svg
      id="ikr_svg"
      class="overlaySvg"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      viewBox="0 0 1105.28 1545.45"
    >
      <defs>
        <style>
          .cls-1 {
            fill: #fff;
          }

          .cls-1,
          .cls-2,
          .cls-3,
          .cls-4 {
            stroke: #fff;
          }

          .cls-1,
          .cls-2,
          .cls-3,
          .cls-4,
          .cls-5 {
            stroke-miterlimit: 10;
          }

          .cls-1,
          .cls-4 {
            stroke-width: 0.5px;
          }

          .cls-2 {
            fill: #ed1d46;
          }

          .cls-2,
          .cls-3,
          .cls-5 {
            opacity: 0;
          }

          .cls-3,
          .cls-5 {
            fill: #ec1a3b;
          }

          .cls-4 {
            fill: #ff003d;
            fill-opacity: 0;
            stroke-width: 1px;
          }

          .cls-5 {
            stroke: #ec1a3d;
          }
        </style>
      </defs>
      <g id="Layer_1">
        <image
          width="9933"
          height="7017"
          transform="translate(-627.66 -74.68) scale(.24)"
          xlink:href="../Renishaw-Coastal-Precinct_Brochure 123 talha vi-01-01.png"
        />
      </g>
      <g id="node_area">
        <!-- all your <path> ... left exactly as you gave -->
        <!-- (keeping them, but truncated here for brevity) -->
      </g>
      <g id="only_stroke">
        <!-- all your stroke polygons -->
      </g>
    </svg>
  </div>

  <script>
    // ==========================================================================
    // Generic Zoom + Drag helper (same logic youâ€™ve been using)
    // ==========================================================================

    function enableZoomAndDrag(containerSelector, contentSelector, options = {}) {
      const factor   = options.factor   || 0.05; // zoom speed
      const maxScale = options.maxScale || 4;
      const minScale = options.minScale || 1;

      const containers = document.querySelectorAll(containerSelector);

      containers.forEach((container) => {
        if (container.dataset.zoomDragInitialized === "true") return;
        container.dataset.zoomDragInitialized = "true";

        const contents = container.querySelectorAll(contentSelector);
        if (!contents.length) return;

        let scale = 1;

        contents.forEach((content) => {
          // -------- DRAG TO PAN --------
          let previousX = 0;
          let previousY = 0;

          content.addEventListener("mousedown", (event) => {
            previousX = event.pageX;
            previousY = event.pageY;
          });

          content.addEventListener("mousemove", (event) => {
            if (!event.buttons) return; // only while mouse button held

            let dragX = 0;
            let dragY = 0;

            if (event.pageX !== previousX) {
              dragX = previousX - event.pageX;
              previousX = event.pageX;
            }

            if (event.pageY !== previousY) {
              dragY = previousY - event.pageY;
              previousY = event.pageY;
            }

            if (dragX !== 0 || dragY !== 0) {
              container.scrollBy(dragX, dragY);
            }
          });
        });

        // -------- WHEEL ZOOM --------
        container.addEventListener(
          "wheel",
          (e) => {
            e.preventDefault(); // prevent page scroll

            const content = contents[0];
            if (!content) return;

            // wheel up = zoom in, wheel down = zoom out
            const zoomDirection = e.deltaY > 0 ? -1 : 1;

            const rect = container.getBoundingClientRect();

            const offset = {
              x: container.scrollLeft,
              y: container.scrollTop,
            };

            // position of mouse relative to scroll content
            const imageLoc = {
              x: e.clientX - rect.left + offset.x,
              y: e.clientY - rect.top + offset.y,
            };

            const zoomPoint = {
              x: imageLoc.x / scale,
              y: imageLoc.y / scale,
            };

            let newScale = scale + zoomDirection * factor * scale;
            newScale = Math.max(minScale, Math.min(maxScale, newScale));
            if (newScale === scale) return;

            scale = newScale;

            const zoomPointNew = {
              x: zoomPoint.x * scale,
              y: zoomPoint.y * scale,
            };

            const newScroll = {
              x: zoomPointNew.x - (e.clientX - rect.left),
              y: zoomPointNew.y - (e.clientY - rect.top),
            };

            contents.forEach((content) => {
              content.style.transformOrigin = "0 0";
              content.style.transform = `scale(${scale}, ${scale})`;
            });

            container.scrollLeft = newScroll.x;
            container.scrollTop  = newScroll.y;
          },
          { passive: false }
        );
      });
    }

    // ==========================================================================
    // Init for this SVG
    // ==========================================================================

    // Use your media query logic if you only want it on desktop:
    const mq = window.matchMedia("(max-width: 767px)");

    function initSvgZoom(mq) {
      if (mq.matches) {
        // on small screens (<= 767px) you can disable if you want
        return;
      }

      // here we zoom the SVG (#ikr_svg) inside .svg-container
      enableZoomAndDrag(".svg-container", "#ikr_svg", {
        maxScale: 4,
        factor: 0.05,
      });
    }

    initSvgZoom(mq);
    mq.addListener(initSvgZoom);
  </script>
</body>
</html>
