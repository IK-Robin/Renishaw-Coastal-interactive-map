<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Container Zoom with Panzoom (Image + SVG)</title>
  <style>
    :root {
      --bg: #f3f4f6;
      --panel: #ffffff;
      --border: #d1d5db;
      --ink: #111827;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--bg);
      color: var(--ink);
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      padding: 20px;
    }

    .map-shell {
      background: var(--panel);
      border-radius: 12px;
      border: 1px solid var(--border);
      box-shadow: 0 14px 40px rgba(15, 23, 42, .15);
      padding: 16px;
      ;
      width: 100%;
      height: 100vh;
    }

    .map-shell h1 {
      margin: 0 0 12px;
      font-size: 18px;
    }

    .map-shell p {
      margin: 0 0 12px;
      font-size: 14px;
      color: #4b5563;
    }

    /* Outer view window */
    /* Outer view window */
.map-viewport {
  position: relative;
  width: 100%;       /* wider container */
  max-width: 100%;     /* still responsive on small screens */
  aspect-ratio: 4/3;
  border-radius: 10px;
  overflow: hidden;
  border: 1px solid var(--border);
  background: #000;
  margin: 0 auto;
  height: 90vh;
}


    /* This is the element Panzoom controls (zoom + pan) */
    .innerWrap {
      position: absolute;
      inset: 0;
      transform-origin: 0 0;
      /* IMPORTANT: no will-change here (keeps image sharp on Chrome/Edge) */
    }

    /* Your SVG fills the container */
   /* Your SVG fills the container */
#ikr_svg {
  position: absolute;
  inset: 0;
  width: 50%;    /* was 40% */
  height: 100%;
  display: block;
  margin: 0 auto;

}


    /* Example plot styling (optional) */
    .cls-3,
    .cls-5 {
      cursor: pointer;
      transition: fill 0.15s ease, stroke 0.15s ease;
    }
    .cls-3:hover,
    .cls-5:hover {
      fill-opacity: 0.7;
    }

    /* Controls */
    .controls {
      position: absolute;
      right: 10px;
      bottom: 10px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      z-index: 10;
    }

    .controls button {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      background: rgba(255, 255, 255, 0.95);
      cursor: pointer;
      font-size: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15);
    }

    .controls button:hover {
      background: #eef2ff;
      border-color: #c7d2fe;
    }

    .controls button:active {
      transform: translateY(1px);
    }

    .zoom-label {
      margin-top: 8px;
      font-size: 12px;
      text-align: right;
      opacity: 0.7;
    }

    @media (max-width: 640px) {
      .map-shell {
        max-width: 100%;
        padding: 12px;
      }
    }
  </style>
</head>
<body>

<div class="map-viewport">
    <!-- This is what we zoom & pan -->
    <div class="innerWrap" id="zoomContainer">
      <!-- Your SVG -->
      <svg
        id="ikr_svg"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        viewBox="0 0 1105.28 1545.45"
      >
        <defs>
          <style>
            .cls-1 {
              fill: #fff;
            }
            .cls-1,
            .cls-2,
            .cls-3,
            .cls-4 {
              stroke: #fff;
            }
            .cls-1,
            .cls-2,
            .cls-3,
            .cls-4,
            .cls-5 {
              stroke-miterlimit: 10;
            }
            .cls-1,
            .cls-4 {
              stroke-width: 0.5px;
            }
            .cls-2 {
              fill: #ed1d46;
            }
            .cls-2,
            .cls-3,
            .cls-5 {
              opacity: 0;
            }
            .cls-3,
            .cls-5 {
              fill: #ec1a3b;
            }
            .cls-4 {
              fill: #ff003d;
              fill-opacity: 0;
              stroke-width: 1px;
            }
            .cls-5 {
              stroke: #ec1a3d;
            }
          </style>
        </defs>
        <g id="Layer_1">
          <image
            width="9933"
            height="7017"
            transform="translate(-627.66 -74.68) scale(.24)"
            xlink:href="../Renishaw-Coastal-Precinct_Brochure 123 talha vi-01-01.png"
          />
        </g>
        <g id="node_area">
          <path
            id="node_2"
            class="cls-3"
            d="m857.33,260.01l-41.12-.38,2.21-15.64-5.62-65.11.77-17.46,3.72-8.98h18.76l233.45,73.86-49.49,78.49-6.2,16.69-7.57,35.88-8.82,19.9-140.1-117.26Zm-61.34-.54l-2.3-43.11,6.28-18.37.13-49.01-5.65-6.02,4.21-46.06-1.02-36.4-169.11,6.81,31.92,190.63,135.55,1.54Z"
          />
          <path
            id="node_3"
            class="cls-5"
            d="m543.16,917.19l-43.73,39.68-3.65-7.15-5.48-6.51-1.05.26-12.4-7.29-9.92-3.12-13.97-2.99-36.55-8.85-17.88-2.86-3.13.13-8.35,1.43-13.97,4.42-8.62,1.7-9.4-3-3.13-.39h-1.43l-3.14-2.08,126.88-207.54,26.69,79.06,6.86,20.35,12.66,37.48,5.61,16.65,1.02,2.97,4.06,12.02.66,2.06.45,1.26,6.63,19.63.23.71,1.18,4.55,1.44,4.29,1.43,3.13Zm-54.35,50.15l-3.65-7.15,2.15-7.08h0s-2.16-3.81-2.16-3.81l-14.83-6.87-5.74-3.25-53.13-12.75-15.53-1.83-5.09.65-12.66,3.91-5.74,3.25-9.93-.26-5.35-.52-12.75-4.64-1.72,1.22-1.71,2.9,12.54,28.73,54.03,123.32,11.62-16.21,30.41-42.81,42.18-59.51-2.94,2.71Zm54.51,148.67l-1.85.91-1,.38-4.88,2.22-2.48.62-1.43.55-1.45.06-7.56.72-5.88-.65-1.29-3.87-.54-1.01-12.5,1.93,6.24.22,9.14,3.64-4.7,1.17-5.22-1.69-7.83-.26-5.75,2.08-.19.09-5.94,3.95-5.49,7.15-9.91,20.71,7.57-3.68,19.05-9.87,40.21-3.77,9.79-24.34-6.11,2.74Zm-98.03,57.12l-.29.26h0s-21.78-49.84-21.78-49.84h-.02l-4.77-10.95-4.05,10.05-1.17,3.09-.06.15v29.8l-6.95,18.42-4.93,13.07,13.19-3.51.19-.09,13.77-6.03,10.84-3.51h6.39l-.36-.91Zm76.2-85.49l-1.56-2.21-1.05-2.6-.39-2.74v-2.99l.65-8.85,2.74-17.17-1.43-5.99-1.7-11.84-1.3-5.72-1.05-4.56-.65.26-4.62-12.68-.08-.23-.68-1.77-45.27,31.99-20.11,25.13-16.8,21.49-3.59,9.44.04.02-5.38,14.05h.03l5.35,12.23h-.02s20.9,48.02,20.9,48.02l.39-.4.79-1.17,1.43-1.3,2.48-1.82,2.22-1.17,17.76-8.98,10.83-22.64,5.74-7.55,3.76-2.47-1.02-1.56,3.14-1.82,6.39-2.34h.16s1.8-1.17,1.8-1.17l12.79-1.96.27-.77h-.01s.05-.14.05-.14l6.61-19.51,1.96-4.95-1.57-1.56Z"
          />
          <path
            id="node_1"
            class="cls-2"
            d="m273.02,1076.93l5.92,19.05-7.24,2.96-10.33-1.02h-.03l-4.7,1.56-6.79.52-9,3.77h-6.53l-8.35-2.6-1.44-.32-4.7-1.5-.15.43-.11-.02v-.41h-1.96l-5.4,1.99-5.08,1.23-.74.16-16.19-.13-.65-3.51.52-4.03,5.09-11.19,2.22-3.91.65-4.94-.65-2.86-3.39-6.12-1.18-2.99.26-3.38,5.09-7.81,2.22-2.73,1.7-4.82-.92-3.25h.01v-.02s-.53-1.8-.53-1.8l-2.61-2.74-14.35-8.97-.03.04-1.67-1.47-4.05-5.47-6.66-3.9-2.21-.13-3.27.13-4.18-11.84,3.79-5.47,3.52-1.56h8.49l2.35-2.6-.26-5.6-4.18-5.46.26-5.73,4.18-8.72,2.74-3.12,6-.91,1.05,2.86,33.94-9.63,11.09,6.25,2.09,6.12,1.05,4.42,20.1,23.03,31.72,15.87-12.53,19.39-.4,1.52-2.6,7.44-8.49,19.02-8.06,9.02-.43.48-.65.15-1.04.24-1.44,3.12.78,3.12h0l4.04,3.25,7.93-2.85,6.17-2.22.19.61Zm112.35-38.89l-16.48-37.64-8.21,6.83-9.66,8.07-9.53,5.2-8.88,2.47-10.57.39-9.4-1.69-21.67-6.34-.66,1.03-.25.5-11.62,17.82h0s-1.43,5.34-1.43,5.34l-1.68,3.76-.93,2.74-7.56,16.36-.02.04-9,9.89-.72.19-.72.2-.91,1.95.52,2.08,3.13,2.47,4.12-1.49,10.63-3.84.12.38,6.57,21.38.42.46,8.82,9.14,1.26,1.76.17.19.41.62,4.68,6.53,4.44,4.3,1.83,5.85,4.05,4.43,2.1.8,2.99.89,1.62.88.07.03.24.14,3.81,2.07,5.35,2.86,5.49.92,3.13,1.17,4.7,2.47,5.09,2.21,10.92-1.42h.04s3.4-3,3.4-3l13.7-10.15,1.16-.39,1.06-.78h1.31l.78-.26,3.56.26h1.27l.17.1.35.03,8.89,5.66.18-.48,1.41-3.84.09.03,16.39-44.43-20.54-47.14Z"
          />
          <polygon
            id="node_5"
            class="cls-3"
            points="313.69 1354.77 293.06 1389.64 282.23 1401.87 275.7 1419.31 272.05 1425.42 227.01 1501.54 189.42 1485.02 184.2 1500.11 103.66 1478.77 98.44 1449.1 159.13 1295.44 145.43 1291.14 149.56 1279.29 149.61 1279.17 159.79 1267.07 183.9 1257.04 188.33 1255.77 190.24 1255.64 200.3 1254.97 203.06 1255.06 209.12 1256.27 214.35 1257.57 214.87 1257.83 219.2 1260.3 227.66 1265.51 230.05 1267.21 234.84 1270.98 234.99 1270.8 264.93 1292.05 265.13 1292.18 265.16 1292.19 269.04 1293.22 270.74 1293.62 271.12 1293.63 273.22 1293.88 274.4 1293.75 276.9 1293.75 279.72 1294.02 248.16 1324.84 313.69 1354.77"
          />
          <path
            id="node_4"
            class="cls-3"
            d="m668.08,713.68l-12.53,45.55.65,5.33-6.92,9.63-24.67,53.74-78.58,92.77-1.09-3.08.05-.04-8.25-24.42-1.41-4.21-.29-.8-59.62-176.42,200.62-41.5-8.61,17.04.65,26.41Zm31.72-49.44l-10.31,30.45-2.22,30.57-.36,1.53,17.2,2.25,7.83.65,13.58.13h4.04l3.13-.78,8.1-1.04v.03l2.87-2.24,1.17-1.7v-5.07l-.78-2.47,3.66-7.03,2.22-3.77,1.56-5.6.26-4.16,2.35-3.64,2.87-4.82,3.14-5.72,4.17-7.81,1.83-6.38,1.96-3.51,2.87-4.81,2.35-4.56,1.57-1.56,1.96-3.51,3.73-2.49-80.75,17.06Zm169.56-27.71l-1.76,6.68-.85,4.51-12.92-.26.35-1.79-.22-.04,1.44-10.02-15.15-1.04-17.11,3.62-40.71,9.53-4.44,2.99-1.83,3.38-1.69,1.56-2.09,4.43-2.87,4.68-1.96,3.51-1.83,6.25-4.18,8.07-3.26,5.72-2.87,4.82-2.09,3.25-.39,4.03-1.57,5.86-2.35,3.9-3.39,6.51.78,2.08v5.72l-1.7,2.35-2.61,2.08.66,1.04,2.61,1.95,5.09-1.95,6.39-.52,3.14-2.86,5.35-5.6,3.39-6.9,3.53-4.94,4.17,3.25,3.4,4.82-.26,5.85,1.82,5.73,3.4,5.2,5.87,4.04,5.35,1.95,5.62-1.69,3.39-1.43,4.7-.66,10.96.62,29.24-44.33,14.49-15.62,17.62-13.01,15.15-17.44,4.3-7.67-32.11-2.21Zm-59.52,101.23l-4.44.52-3.26,1.43-6.14,1.82-6.13-2.08-6.27-4.43-3.65-5.59-1.96-6.12.26-5.72-3-4.17-2.61-2.08-2.61,3.52-3.4,7.02-5.48,5.73-3.65,3.38-6.66.52-5.61,2.08-3.66-2.6-1.01-1.51-7.6.99-3.14.91h-4.3l-13.58-.13-7.96-.78-17.43-2.14-11.94,50.8-49.87,80.15-71.4,83.28,1.7,4.81,22.58-31.74,5.22-1.7,7.84-6.76,3.13-2.34,12.92-.26,4.7,3.9,3.92,9.89,15.4-18.61,9.14-3.77,30.02-19.26,6.13.91,5.49-1.69,9.26-2.34,5.36,2.6,5.35-1.95,5.48-9.11-3.39-8.85-6.79-8.59-4.05-7.41-2.74-8.2-3.92-6.11-5.74-5.47,6.27-6.9,10.18,8.2-.13,11.97,3.52,8.33,7.7,10.15,4.7,10.28-.91,6.76-4.05,7.42-6.78,4.55-9.79,1.31-10.45,4.68-9.4,1.95-23.62,24.85-2.09,13.54.39,7.8,3,2.09-1.3,3.12.91,5.07,1.96,1.69,5.61-9.36,12.01-17.83,43.21-43.85,89.02-108.65,19.37-29.36-9.84-.56Z"
          />
        </g>
        <!-- strokes group left as-is... -->
      </svg>
    </div>

    <!-- Zoom controls -->
    <div class="controls">
      <button id="zoom_in" type="button">+</button>
      <button id="zoom_out" type="button">−</button>
      <button id="reset" type="button">⟳</button>
    </div>
  </div>

  <div class="zoom-label" id="zoomLabel">Zoom: 100%</div>

<!-- Panzoom library (no bundler needed) -->
<script src="https://unpkg.com/@panzoom/panzoom/dist/panzoom.min.js"></script>

<script>
  (function () {
    const container = document.getElementById("zoomContainer");
    const zoomInBtn = document.getElementById("zoom_in");
    const zoomOutBtn = document.getElementById("zoom_out");
    const resetBtn = document.getElementById("reset");
    const zoomLabel = document.getElementById("zoomLabel");

    if (!container) {
      console.error("zoomContainer not found");
      return;
    }

    // Panzoom with NO auto scaling on init
    const panzoom = Panzoom(container, {
      maxScale: 10,
      minScale: 1,
      step: 0.25,
      contain: "none",   // <- important: don't auto-zoom to fit
      cursor: "grab"
    });

    const viewport = container.parentElement;

    // Wheel zoom
    viewport.addEventListener(
      "wheel",
      function (event) {
        event.preventDefault();
        panzoom.zoomWithWheel(event);
      },
      { passive: false }
    );

    function updateLabel(scale) {
      zoomLabel.textContent = "Zoom: " + Math.round(scale * 100) + "%";
    }

    // Track zoom changes
    container.addEventListener("panzoomchange", function (event) {
      const detail = event.detail;
      if (detail && typeof detail.scale === "number") {
        updateLabel(detail.scale);
      }
    });

    // Buttons
    zoomInBtn.addEventListener("click", () => {
      panzoom.zoomIn();
    });

    zoomOutBtn.addEventListener("click", () => {
      panzoom.zoomOut();
    });

    resetBtn.addEventListener("click", () => {
      panzoom.reset({
        animate: true
      });
      updateLabel(1);
    });

    // Start exactly at 100%
    updateLabel(1);
  })();
</script>


</body>
</html>
